
ÍNDEX
1. QUÈ ÉS UN HONEYPOT?
2. COM FUNCIONA EL NOSTRE HONEYPOT.SH
3. PREREQUISITS
3. MÉTODE D'ÚS
4. PREGUNTES FREQÜENTS

---------------------------------------------------------------------------------------------------------------------------------------------------------------
1 - Què és un honeypot? Quines capacitats té?

    - Un honeypot és una eina molt útil i utilitzada en l'àmbit de la seguretat informàtica. La seva funció és la d'atreure i analitzar atacs realitzats des de 
    l'exterior, ja sigui per bots o per hackers. D'aquesta manera podem conéixer en més profunditat l'atacant. Podem analitzar les seves pautes d'atac, les 
    paraules que utilitza... per tal de poder defensar-nos millor sobre ell.
    El honeypot serà un equip vulnerable que estarà constantment rebent informació dels diferents intrusos, que s'utilitzarà al nostre servidor original, per
    tal de protegir-nos. Per exemple, actualitzant les taules IP del tallafocs o realitzant diferents actualitzacions que ens permetin evitar el perill.
    
    - El honeypot realitza tres funcions principals. La primera és la d'escoltar (rep els diferents atacs amb el seu corresponent contingut). La segona és la 
    de monitoritzar (es fa el tractament de la informació) per tal de tenir tot controlat. I la tercera és la d'informar l'usuari (mitjançant l'output per 
    pantalla)

    - El honeypot pot ser col·locat en dos llocs principals, depenent de les necessitats de l'usuari.

        - A fora de l'external firewall: En aquest posició no perilla la xarxa interna. A més, redueix el tràfic d'atacs cap al firewall. 
                                         El principal problema d'aquesta posició és que al trobar-se a l'exterior, no pot atrapar als intrussos de la xarxa 
                                         interna, el que segons en quins casos pot ser un problema greu. 

        - A la xarxa interna: En aquest punt el programa pot detectar atacs més interns de la nostra xarxa. Com els atacs han de passar a través del firewall, 
                              un avantatge que té aquesta posició del honeypot és que pot detectar errors del firewall que ja tenim configurat, que s'han de 
                              solucionar per evitar problemes. 
                              Un dels inconvenients principals d'aquesta posició del honeypot és la pròpia posició. En el cas de que no tinguem ben configurat 
                              el honeypot i algun atac es pugui realitzar amb èxit, l'intrús tindrà acces a totes les altres màquines situades a la xarxa 
                              interna, el que és extremadament crític i perillós.
                              Per tant, podríem dir que aquesta posició pot arribar a monitoritzar un número d'atacs major i de diferents tipus, però el perill 
                              que es corre és màxim. Hem de tenir la seguretat de que està funcionant sense cap tipus d'anomalia. 


2. Com funciona el nostre honeypot.sh ?

    - Es basa en monitoritzar un port de l'equip i notificar-li a l'usuari la diferent informació que es va rebent. L'usuari haurà d'introduir la interfície, 
    protocol i número de port a monitoritzar. 
     
3 - Prerequisits

    - Primer de tot necessitarem una màquina o servidor amb un Sistema Operatiu basat el Linux, s'ha dissenyat al SO Debian 10(Buster) però pot funcionar a un
    altre sempre que es compleixin tots els requisits. 
    
    - Després necessitarem una interfície activa al nostre ordinador que tingui com a mínim una IP v4 assignada(en cas de tenir més d'una s'escollirà l'assignada 
    primer). 
    
    - També haurem de tenir accés a permisos de SuperUser per a executar el script, ja sigui des de l'usuasi root, o amb un usuari sudoer. Per acabar la part 
    externa a l'script, necessitarem donar-li permisos pertinents, en aquest cas farem (# chmod 100) per donar-li permisos d'execució al propietari del script. 

    - Els paquets necessaris són el progama tcpdump que el podem instalar amb la comanda (# sudo apt install tcpdump) o en el cas del root ( # apt install tcpdump)
    que ens servirà per monitoritzar l'informació que pasa per la nostra interfície. També necessitarem instalar (en cas de que no ho tinguem ja) el paquet 
    iproute2, utilitzat per agafar diversos paràmetres de la nostra interfície. Cal recalcar que l'script t'avisarà en cas de que els programes no es trobin 
    instalats però sempre ho podem verificar previament nostaltres.
   

3. Métode d'ús

    - Com un usuari ha d'utilitzar l'script? Quins paràmetres d'entrada té?

        - L'usuari només ha de descarregar l'arxiu honeypot.sh, col·locar-lo al directori desitjat i asegurar-se que compleix els prerequisits. 

        - En quant a paràmetres, a part del de l'execució del propi script (./honeypot.sh), s'ha d'afegir la interfície, el protocol i el port, en cas de ser necessari. 
        En el cas d'utilitzar el protocol ICMP, no farà falta especificar un port.
        En canvi, amb els protocols TCP i UDP sí que necessitaràs especificar el port. Aquestes són algunes característiques dels arguments:
            - Interfície: Haurà de ser una interfície vàlida del sistema. 
            - Protocol: Ha de ser TCP, UPD o ICMP. 
            - Port: Ha de ser un nombre enter entre el 0 i el 65535.

    - En quins casos d'ús es pot fer servir?

        - 

    - Exemples d'execució
    
    * El protocol es por col·locar en mayúscula o minúscula, és indiferent.

    TCP --> ./honeypot.sh enp0s3 tcp 22

    UDP --> ./honeypot.sh enp0s3 udp 161

    ICMP --> ./honeypot.sh enp0s3 icmp

    - Explicació UI

Exemple ICMP: 

-----------------------------------------------------------------------------
Accesos a l'adreça 192.168.0.26 port icmp  [15:58:29.507280 , 15:58:48.142297] 
-----------------------------------------------------------------------------

------------------------------
Resum dels accessos
------------------------------
    Adreces IP     Nº accessos
 ---------------   -----------
    192.168.0.23             7
    192.168.0.30             5
 ---------------   -----------        
                                      
--------------------------------------
Evolució dels accessos                
--------------------------------------
      Temps         Adreça IP     Port
 --------------- --------------- -----
 15:58:29.507280    192.168.0.23      
 15:58:31.548130    192.168.0.23      
 15:58:33.628044    192.168.0.23      
 15:58:35.675986    192.168.0.23      
 15:58:39.949366    192.168.0.30      
 15:58:41.998994    192.168.0.30      
 15:58:44.046892    192.168.0.30      
 15:58:44.381600    192.168.0.23      
 15:58:45.404808    192.168.0.23      
 15:58:46.094208    192.168.0.30      
 15:58:47.498156    192.168.0.23      
 15:58:48.142297    192.168.0.30      
 --------------- --------------- -----
                 
Prem [q] per sortir.


Exemple TCP: 

-----------------------------------------------------------------------------
Accesos a l'adreça 192.168.0.26 port tcp 22 [16:00:09.319956 , 16:00:48.351998] 
-----------------------------------------------------------------------------

------------------------------
Resum dels accessos
------------------------------
    Adreces IP     Nº accessos
 ---------------   -----------
    192.168.0.23             2
    192.168.0.30             3
 ---------------   -----------        
                                      
--------------------------------------
Evolució dels accessos                
--------------------------------------
      Temps         Adreça IP     Port
 --------------- --------------- -----
 16:00:09.319956    192.168.0.23 50390
 16:00:13.063966    192.168.0.23 50392
 16:00:42.496250    192.168.0.30 45160
 16:00:45.695640    192.168.0.30 45162
 16:00:48.351998    192.168.0.30 45164
 --------------- --------------- -----
                    
Prem [q] per sortir.
 

- Complement fitxer log_honeypot 

----------------------------------------------------------------------------------------------------------
Monitorització realitzada per l'usuari root de l'equip honeypot.
Sistema operatiu Debian GNU/Linux 10 (buster).
Versió del script 1.0 compilada el 2020-04-25.
Monitorització iniciada en data 2020-02-04 a les 08:59:45 i finalitzada en data 2020-02-04 a les 09:02:15.
----------------------------------------------------------------------------------------------------------


5 - Preguntes freqüents


